{"version":3,"sources":["components/Header.jsx","components/PageTemplate.jsx","components/ImageContainer.jsx","components/ImageItem.jsx","assets/loader.svg","components/Loader.jsx","lib/api/client.js","lib/hooks/usePromise.js","App.jsx","lib/api/photos.js","lib/utils.js","GlobalStyle.js","index.js"],"names":["HeaderBlock","styled","hgroup","Header","PageTemplate","children","PageTemplateBlock","defaultProps","div","ImageContainer","error","ImageContainerBlock","className","ImageItem","photo","onLoad","ImageItemBlock","href","links","html","target","rel","src","urls","regular","alt","alt_description","title","e","Loader","visible","LoaderBlock","$visible","loaderImage","props","client","axios","create","defaults","baseURL","usePromise","promiseCreator","deps","useState","loading","setLoading","resolved","setResolved","setError","useEffect","a","promiseResolved","process","App","ready","total","loaded","imageLoad","_setImageLoad","imageLoadRef","useRef","setImageLoad","data","current","origins","photos","_setPhotos","photosRef","setPhotos","query","count","get","params","getRandomPhotos","response","onScroll","window","innerHeight","scrollY","document","body","offsetHeight","nextPhotos","array","res","i","length","j","Math","floor","random","shuffle","concat","addEventListener","removeEventListener","onLoadImage","useCallback","photosWithId","useMemo","map","id","images","GlobalStyle","createGlobalStyle","ReactDOM","render","StrictMode","getElementById"],"mappings":"oOAaMA,EAAcC,IAAOC,OAAV,onBAqCFC,EA/CA,WACb,OACE,eAACH,EAAD,WACE,+CACA,yDACA,kGCHAI,EAAe,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACtB,OACE,eAACC,EAAD,WACE,cAAC,EAAD,IACCD,MAYPD,EAAaG,aAAe,CAC1BF,SAAU,MAGZ,I,EAAMC,EAAoBL,IAAOO,IAAV,4TAmBRJ,ICxCTK,EAAiB,SAAC,GAAyB,IAAvBJ,EAAsB,EAAtBA,SAAUK,EAAY,EAAZA,MAClC,OAAIA,EAEA,cAACC,EAAD,UACE,qBAAKC,UAAU,QAAf,SAAwBF,MAKvB,cAACC,EAAD,UAAsBN,KAQ/BI,EAAeF,aAAe,CAC5BF,SAAU,GACVK,MAAO,IAGT,I,EAAMC,EAAsBV,IAAOO,IAAV,yPAkBVC,ICxCTI,EAAY,SAAC,GAAuB,IAArBC,EAAoB,EAApBA,MAAOC,EAAa,EAAbA,OAO1B,OACE,cAACC,EAAD,UACE,mBAAGC,KAAMH,EAAMI,MAAMC,KAAMC,OAAO,SAASC,IAAI,sBAA/C,SACE,qBACEC,IAAKR,EAAMS,KAAKC,QAChBC,IAAKX,EAAMY,gBACXC,MAAOb,EAAMY,gBACbX,OAbc,SAAAa,GAChBb,GACFA,EAAOa,WA2Bbf,EAAUN,aAAe,CACvBQ,OAAQ,MAGV,I,EAAMC,EAAiBf,IAAOO,IAAV,6UAsBLK,IC5DA,MAA0B,mCCKnCgB,EAAS,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QAChB,OACE,cAACC,EAAD,CAAaC,SAAUF,EAAvB,SACE,qBAAKR,IAAKW,EAAaR,IAAI,eASjCI,EAAOtB,aAAe,CACpBuB,SAAS,GAGX,IAAMC,EAAc9B,IAAOO,IAAV,gRAOJ,SAAA0B,GAAK,OAAKA,EAAMF,SAAW,QAAU,UAUnCH,I,QCpCTM,E,OAASC,EAAMC,SAErBF,EAAOG,SAASC,QAAU,2CAEXJ,I,EAAAA,I,yBCkBAK,EAtBI,SAACC,EAAgBC,GAClC,MAA8BC,oBAAS,GAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAAgCF,mBAAS,MAAzC,mBAAOG,EAAP,KAAiBC,EAAjB,KACA,EAA0BJ,mBAAS,MAAnC,mBAAOjC,EAAP,KAAcsC,EAAd,KAgBA,OAdAC,qBAAU,YACK,uCAAG,4BAAAC,EAAA,6DACdL,GAAW,GADG,kBAGkBJ,IAHlB,OAGNU,EAHM,OAIZJ,EAAYI,GAJA,gDAMZH,EAAS,EAAD,IANI,QAQdH,GAAW,GARG,yDAAH,qDAUbO,KACCV,GAEI,CAACE,EAASE,EAAUpC,IC6Fd2C,EAnGH,WACV,MAAmCV,mBAAS,CAC1CW,OAAO,EACPC,MAAO,EACPC,OAAQ,IAHV,mBAAOC,EAAP,KAAkBC,EAAlB,KAMMC,EAAeC,iBAAOH,GACtBI,EAAe,SAAAC,GACnBH,EAAaI,QAAUD,EACvBJ,EAAcI,IAGhB,EAA6BnB,mBAAS,CAAEqB,QAAS,GAAIT,MAAO,KAA5D,mBAAOU,EAAP,KAAeC,EAAf,KACMC,EAAYP,iBAAOK,GACnBG,EAAY,SAAAN,GAChBK,EAAUJ,QAAUD,EACpBI,EAAWJ,IAGb,EAA4BtB,GAAW,WAGrC,OCnC2B,SAAC,GAAD,IAAG6B,EAAH,EAAGA,MAAOC,EAAV,EAAUA,MAAV,OAC7BnC,EAAOoC,IAAP,kBAA8B,CAAEC,OAAQ,CAAEH,QAAOC,WDkCxCG,CAAgB,CAAEJ,MAFX,OAEkBC,MADlB,OAEb,IAJH,mBAASI,EAAT,KAAmBhE,EAAnB,KAMMiE,EAAW,WACf,MAAiCC,OAGjC,GAHA,EAAQC,YAAR,EAAqBC,SACIC,SAASC,KAA1BC,aAGkC,KACxCtB,EAAaI,QAAQT,MACrB,CACA,IAAM4B,EEhDW,SAAAC,GAErB,IADA,IAAMC,EAAG,YAAOD,GACPE,EAAID,EAAIE,OAAS,EAAGD,EAAI,EAAGA,GAAK,EAAG,CAC1C,IAAME,EAAIC,KAAKC,MAAMD,KAAKE,UAAYL,EAAI,IADA,EAEvB,CAACD,EAAIG,GAAIH,EAAIC,IAA/BD,EAAIC,GAFqC,KAEjCD,EAAIG,GAF6B,KAI5C,OAAOH,EF0CgBO,CAAQxB,EAAUJ,QAAQC,SAC7CH,EAAa,2BACRF,EAAaI,SADN,IAEVT,OAAO,EACPC,MAAOY,EAAUJ,QAAQR,MAAM+B,OAASJ,EAAWI,UAErDlB,EAAU,CACRJ,QAAQ,YAAKG,EAAUJ,QAAQC,SAC/BT,MAAOY,EAAUJ,QAAQR,MAAMqC,OAAOV,OAK5CjC,qBAAU,WAER,OADA2B,OAAOiB,iBAAiB,SAAUlB,GAC3B,WACLC,OAAOkB,oBAAoB,SAAUnB,MAEtC,IAEH1B,qBAAU,WACJyB,GAAYA,EAASZ,OACvBM,EAAU,CAAEJ,QAAQ,YAAKU,EAASZ,MAAOP,MAAM,YAAKmB,EAASZ,QAC7DD,EAAa,2BACRJ,GADO,IAEVF,MAAOmB,EAASZ,KAAKwB,aAGxB,CAACZ,IAEJ,IAAMqB,EAAcC,uBAAY,WAC9BnC,EAAa,2BACRJ,GADO,IAEVD,OAAQC,EAAUD,OAAS,EAC3BF,MAAOG,EAAUD,OAAS,IAAMC,EAAUF,WAE3C,CAACE,IAEEwC,EAAeC,mBACnB,kBACEjC,EAAOV,MAAM4C,KAAI,SAACrF,EAAOuE,GAAR,mBAAC,eACbvE,GADY,IAEfsF,GAAIf,SAER,CAACpB,EAAOV,QAGJ8C,EAASH,mBACb,kBACED,EAAaE,KAAI,SAAArF,GAAK,OACpB,cAAC,EAAD,CAA0BA,MAAOA,EAAOC,OAAQgF,GAAhCjF,EAAMsF,SAE1B,CAACH,EAAcF,IAGjB,OACE,qCACE,cAAC,EAAD,UACE,cAAC,EAAD,CAAgBrF,MAAOA,EAAvB,SAA+B2F,MAEjC,cAAC,EAAD,CAAQvE,SAAU2B,EAAUH,YGzEnBgD,G,MAjCKC,YAAH,2gBCEjBC,IAASC,OACP,eAAC,IAAMC,WAAP,WACE,cAAC,EAAD,IACA,cAAC,EAAD,OAEF3B,SAAS4B,eAAe,W","file":"static/js/main.d10e96fe.chunk.js","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\n\nconst Header = () => {\n  return (\n    <HeaderBlock>\n      <h1>INFINITE DOGS</h1>\n      <h2>Powered by Unsplash API</h2>\n      <h3>This website only makes API requests when it is first loaded</h3>\n    </HeaderBlock>\n  );\n};\n\nconst HeaderBlock = styled.hgroup`\n  text-align: center;\n  padding: 0 0 10px;\n  letter-spacing: 5px;\n  border-bottom: 3px dotted #000;\n\n  > h1,\n  > h2 {\n    margin: 5px 0;\n  }\n\n  > h1 {\n    letter-spacing: 13.5px;\n    padding-left: 13.5px;\n  }\n\n  > h2 {\n    font-size: 1.2rem;\n    letter-spacing: 6.4px;\n    padding-left: 6.4px;\n    color: rgb(126, 126, 126);\n  }\n\n  @media screen and (max-width: 1280px) {\n    > h1 {\n      font-size: 1.5rem;\n      letter-spacing: 8px;\n      padding-left: 8px;\n    }\n    > h2 {\n      font-size: 1rem;\n      letter-spacing: 3.5px;\n      padding-left: 3.5px;\n    }\n  }\n`;\n\nexport default Header;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport Header from './Header';\n\nconst PageTemplate = ({ children }) => {\n  return (\n    <PageTemplateBlock>\n      <Header />\n      {children}\n    </PageTemplateBlock>\n  );\n};\n\nPageTemplate.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.node,\n    PropTypes.arrayOf(PropTypes.node),\n  ]),\n};\n\nPageTemplate.defaultProps = {\n  children: null,\n};\n\nconst PageTemplateBlock = styled.div`\n  margin: 30px 30%;\n  @media screen and (max-width: 1680px) {\n    & {\n      margin: 30px 25%;\n    }\n  }\n  @media screen and (max-width: 1280px) {\n    & {\n      margin: 30px 20%;\n    }\n  }\n  @media screen and (max-width: 700px) {\n    & {\n      margin: 30px 10px;\n    }\n  }\n`;\n\nexport default PageTemplate;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nconst ImageContainer = ({ children, error }) => {\n  if (error) {\n    return (\n      <ImageContainerBlock>\n        <div className=\"error\">{error}</div>\n      </ImageContainerBlock>\n    );\n  }\n\n  return <ImageContainerBlock>{children}</ImageContainerBlock>;\n};\n\nImageContainer.propTypes = {\n  children: PropTypes.arrayOf(PropTypes.node),\n  error: PropTypes.string,\n};\n\nImageContainer.defaultProps = {\n  children: [],\n  error: '',\n};\n\nconst ImageContainerBlock = styled.div`\n  columns: 3;\n  overflow: hidden;\n\n  > .error {\n    width: 100%;\n    height: 100%;\n    text-align: center;\n    color: red;\n  }\n\n  @media screen and (max-width: 1280px) {\n    & {\n      columns: 2;\n    }\n  }\n`;\n\nexport default ImageContainer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nconst ImageItem = ({ photo, onLoad }) => {\n  const onLoadHandler = e => {\n    if (onLoad) {\n      onLoad(e);\n    }\n  };\n\n  return (\n    <ImageItemBlock>\n      <a href={photo.links.html} target=\"_blank\" rel=\"noopener noreferrer\">\n        <img\n          src={photo.urls.regular}\n          alt={photo.alt_description}\n          title={photo.alt_description}\n          onLoad={onLoadHandler}\n        />\n      </a>\n    </ImageItemBlock>\n  );\n};\n\nImageItem.propTypes = {\n  photo: PropTypes.shape({\n    links: PropTypes.shape({ html: PropTypes.string.isRequired }),\n    urls: PropTypes.shape({ regular: PropTypes.string.isRequired }),\n    alt_description: PropTypes.string,\n  }).isRequired,\n  onLoad: PropTypes.func,\n};\n\nImageItem.defaultProps = {\n  onLoad: null,\n};\n\nconst ImageItemBlock = styled.div`\n  display: inline-block;\n\n  > a {\n    box-sizing: border-box;\n    display: inline-flex;\n    width: 100%;\n    height: 100%;\n    position: relative;\n    margin: 5px;\n\n    > img {\n      width: 100%;\n      transition: 0.8s;\n\n      &:hover {\n        transform: scale(1.1);\n      }\n    }\n  }\n`;\n\nexport default ImageItem;\n","export default __webpack_public_path__ + \"static/media/loader.5700173c.svg\";","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport loaderImage from 'assets/loader.svg';\n\nconst Loader = ({ visible }) => {\n  return (\n    <LoaderBlock $visible={visible}>\n      <img src={loaderImage} alt=\"Loading\" />\n    </LoaderBlock>\n  );\n};\n\nLoader.propTypes = {\n  visible: PropTypes.bool,\n};\n\nLoader.defaultProps = {\n  visible: false,\n};\n\nconst LoaderBlock = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  background-color: rgba(255, 255, 255, 0.6);\n  display: ${props => (props.$visible ? 'block' : 'none')};\n\n  > img {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  }\n`;\n\nexport default Loader;\n","import axios from 'axios';\n\nconst client = axios.create();\n\nclient.defaults.baseURL = 'https://unsplash-api-hseoy.herokuapp.com';\n\nexport default client;\n","import { useState, useEffect } from 'react';\n\nconst usePromise = (promiseCreator, deps) => {\n  const [loading, setLoading] = useState(false);\n  const [resolved, setResolved] = useState(null);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const process = async () => {\n      setLoading(true);\n      try {\n        const promiseResolved = await promiseCreator();\n        setResolved(promiseResolved);\n      } catch (e) {\n        setError(e);\n      }\n      setLoading(false);\n    };\n    process();\n  }, deps);\n\n  return [loading, resolved, error];\n};\n\nexport default usePromise;\n","import React, {\n  useEffect,\n  useState,\n  useMemo,\n  useCallback,\n  useRef,\n} from 'react';\nimport PageTemplate from 'components/PageTemplate';\nimport ImageContainer from 'components/ImageContainer';\nimport ImageItem from 'components/ImageItem';\nimport Loader from 'components/Loader';\nimport { getRandomPhotos } from 'lib/api/photos';\nimport { shuffle } from 'lib/utils';\nimport usePromise from 'lib/hooks/usePromise';\n\nconst App = () => {\n  const [imageLoad, _setImageLoad] = useState({\n    ready: false,\n    total: 0,\n    loaded: 0,\n  });\n\n  const imageLoadRef = useRef(imageLoad);\n  const setImageLoad = data => {\n    imageLoadRef.current = data;\n    _setImageLoad(data);\n  };\n\n  const [photos, _setPhotos] = useState({ origins: [], total: [] });\n  const photosRef = useRef(photos);\n  const setPhotos = data => {\n    photosRef.current = data;\n    _setPhotos(data);\n  };\n\n  const [, response, error] = usePromise(() => {\n    const query = 'dogs';\n    const count = 30;\n    return getRandomPhotos({ query, count });\n  }, []);\n\n  const onScroll = () => {\n    const { innerHeight, scrollY } = window;\n    const { offsetHeight } = document.body;\n\n    if (\n      innerHeight + scrollY >= offsetHeight - 1000 &&\n      imageLoadRef.current.ready\n    ) {\n      const nextPhotos = shuffle(photosRef.current.origins);\n      setImageLoad({\n        ...imageLoadRef.current,\n        ready: false,\n        total: photosRef.current.total.length + nextPhotos.length,\n      });\n      setPhotos({\n        origins: [...photosRef.current.origins],\n        total: photosRef.current.total.concat(nextPhotos),\n      });\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('scroll', onScroll);\n    return () => {\n      window.removeEventListener('scroll', onScroll);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (response && response.data) {\n      setPhotos({ origins: [...response.data], total: [...response.data] });\n      setImageLoad({\n        ...imageLoad,\n        total: response.data.length,\n      });\n    }\n  }, [response]);\n\n  const onLoadImage = useCallback(() => {\n    setImageLoad({\n      ...imageLoad,\n      loaded: imageLoad.loaded + 1,\n      ready: imageLoad.loaded + 1 === imageLoad.total,\n    });\n  }, [imageLoad]);\n\n  const photosWithId = useMemo(\n    () =>\n      photos.total.map((photo, i) => ({\n        ...photo,\n        id: i,\n      })),\n    [photos.total],\n  );\n\n  const images = useMemo(\n    () =>\n      photosWithId.map(photo => (\n        <ImageItem key={photo.id} photo={photo} onLoad={onLoadImage} />\n      )),\n    [photosWithId, onLoadImage],\n  );\n\n  return (\n    <>\n      <PageTemplate>\n        <ImageContainer error={error}>{images}</ImageContainer>\n      </PageTemplate>\n      <Loader visible={!imageLoad.ready} />\n    </>\n  );\n};\n\nexport default App;\n","import client from './client';\n\n// eslint-disable-next-line import/prefer-default-export\nexport const getRandomPhotos = ({ query, count }) =>\n  client.get(`/photos/random/`, { params: { query, count } });\n","// eslint-disable-next-line import/prefer-default-export\nexport const shuffle = array => {\n  const res = [...array];\n  for (let i = res.length - 1; i > 0; i -= 1) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [res[i], res[j]] = [res[j], res[i]];\n  }\n  return res;\n};\n","import { createGlobalStyle } from 'styled-components';\nimport 'assets/fonts/fonts.css';\n\nconst GlobalStyle = createGlobalStyle`\n  :hover, :focus {\n    outline: none;\n  }\n\n  body {\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    margin: 0;\n    font-family: \"Bebas Neue\", cursive, sans-serif;\n  }\n\n  body, h1, h2, h3, div {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    border: none;\n    outline: none;\n  }\n\n  a {\n    text-decoration: none;\n\n    :hover {\n      text-decoration: underline;\n    }\n  }\n\n  img {\n    vertical-align: middle;\n  }\n`;\n\nexport default GlobalStyle;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport GlobalStyle from './GlobalStyle';\n\nReactDOM.render(\n  <React.StrictMode>\n    <GlobalStyle />\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// reportWebVitals();\n"],"sourceRoot":""}